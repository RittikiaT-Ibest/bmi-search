<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>ระบบ BMI นักเรียน - เวอร์ชันสมบูรณ์</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body class="bg-gray-100 p-4">
<div class="max-w-7xl mx-auto bg-white p-6 rounded shadow">
  <h1 class="text-3xl font-bold text-center mb-6">ระบบค้นหาข้อมูล BMI นักเรียน</h1>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
    <input list="student_id_list" id="searchId" placeholder="เลขประจำตัว" class="p-2 border rounded" />
    <input list="name_list" id="searchName" placeholder="ชื่อ" class="p-2 border rounded" />
    <input list="class_list" id="searchClass" placeholder="ชั้น" class="p-2 border rounded" />
    <input list="room_list" id="searchRoom" placeholder="ห้อง" class="p-2 border rounded" />
    <input list="advisor1_list" id="searchAdvisor1" placeholder="ครูที่ปรึกษา 1" class="p-2 border rounded" />
    <input list="advisor2_list" id="searchAdvisor2" placeholder="ครูที่ปรึกษา 2" class="p-2 border rounded" />
  </div>

  <div class="overflow-x-auto">
    <table class="min-w-full bg-white border">
      <thead>
        <tr class="bg-gray-200">
          <th class="p-2 border">เลขประจำตัว</th>
          <th class="p-2 border">ชื่อ</th>
          <th class="p-2 border">ชั้น</th>
          <th class="p-2 border">ห้อง</th>
          <th class="p-2 border">น้ำหนัก</th>
          <th class="p-2 border">ส่วนสูง</th>
          <th class="p-2 border">BMI</th>
          <th class="p-2 border">แปลผล</th>
          <th class="p-2 border">ครูที่ปรึกษา 1</th>
          <th class="p-2 border">ครูที่ปรึกษา 2</th>
        </tr>
      </thead>
      <tbody id="dataBody"></tbody>
    </table>
  </div>

  <div class="mt-6 flex flex-wrap justify-between items-center gap-4">
    <button onclick="showStats()" class="bg-blue-600 text-white px-4 py-2 rounded">ดูสถิติ</button>
    <div>
      <label for="advisorReport" class="block font-medium mb-2">เลือกครูที่ปรึกษาสำหรับรายงาน:</label>
      <select id="advisorReport" class="p-2 border rounded">
        <option value="">-- เลือกครูที่ปรึกษา --</option>
      </select>
      <button onclick="generatePDF()" class="ml-2 bg-green-600 text-white px-4 py-2 rounded">สร้างรายงาน PDF</button>
    </div>
  </div>

  <div id="statsSection" class="mt-10 hidden">
    <h2 class="text-2xl font-semibold mb-4">สถิติ BMI นักเรียน</h2>
    <canvas id="bmiChart" width="400" height="200"></canvas>
  </div>
</div>

<datalist id="student_id_list"></datalist>
<datalist id="name_list"></datalist>
<datalist id="class_list"></datalist>
<datalist id="room_list"></datalist>
<datalist id="advisor1_list"></datalist>
<datalist id="advisor2_list"></datalist>

<script>
// (JavaScript ทั้งหมดที่เกี่ยวกับ fetchData, renderTable, filter, showStats, และ generatePDF จะใส่ในโค้ดเต็มจริง)
</script>
</body>
</html>
